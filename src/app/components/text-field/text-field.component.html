<!-- Input Component Template -->
<div class="form-field">
    <!-- Label con indicador de requerido -->
    <label *ngIf="label" [for]="id" class="block mb-1 text-sm font-semibold text-gray-900 dark:text-white">
        {{ label }}
        <span class="text-red-500 text-lg" [class.invisible]="!isRequired">*</span>
    </label>

    <!-- Contenedor relativo para el input y botón de password -->
    <div class="relative">
        @if (!mask) {
        <!-- Input sin máscara -->
        <input [id]="id" [attr.type]="type === 'password' ? (showPassword ? 'text' : 'password') : type"
            [value]="currentValue" (input)="onValueChange($event)" (focus)="onFocus()" (blur)="onBlur()"
            [placeholder]="placeholder" [attr.min]="min" [attr.max]="max" [attr.step]="step" [disabled]="disabled"
            [name]="name || id" [ngClass]="{
                    'input-error': getErrors().length > 0,
                    'pr-12': type === 'password'
                }" [class]="inputClass"
            class="form-control mt-1 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:text-white transition-colors duration-200 focus:outline-none"
            style="background-color: transparent; border: 1px solid #D1D5DB;" [required]="isRequired" />
        } @else {
        <!-- Input con máscara -->
        <input [id]="id" [attr.type]="type === 'password' ? (showPassword ? 'text' : 'password') : type"
            [value]="currentValue" (input)="onValueChange($event)" (focus)="onFocus()" (blur)="onBlur()"
            [placeholder]="placeholder" [attr.min]="min" [attr.max]="max" [attr.step]="step" [disabled]="disabled"
            [name]="name || id" [ngClass]="{
                    'input-error': getErrors().length > 0,
                    'pr-12': type === 'password'
                }" [class]="inputClass"
            class="form-control mt-1 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:text-white transition-colors duration-200 focus:outline-none"
            style="background-color: transparent; border: 1px solid #D1D5DB;" mask="{{ activeMask }}"
            [dropSpecialCharacters]="false" [showMaskTyped]="isFocused" [clearIfNotMatch]="false"
            [required]="isRequired" />
        }

        <!-- Botón toggle para password -->
        @if (type === 'password') {
        <div class="absolute inset-y-0 right-0 flex items-center pr-0">
            <button *ngIf="type === 'password'" type="button"
                class="position-absolute top-50 end-0 translate-middle-y me-3 p-0 border-0 text-muted"
                (click)="togglePasswordVisibility()"
                [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'"
                [title]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'" tabindex="-1">
                <i class="ti ti-eye text-xl" *ngIf="!showPassword"></i>
                <i class="ti ti-eye-off text-xl" *ngIf="showPassword"></i>
            </button>
        </div>
        }
    </div>

    <!-- Mensajes de error -->
    @if (getErrors().length > 0) {
    <div class="text-red-500 text-sm mt-1" role="alert">
        <span>{{ getErrors()[0].message }}</span>
    </div>
    }
</div>
